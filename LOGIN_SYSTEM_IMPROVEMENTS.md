# ุชุญุณููุงุช ูุธุงู ุชุณุฌูู ุงูุฏุฎูู - Marina Hotel

## ๐ ููุฎุต ุงูุชุญุณููุงุช ุงููููุฐุฉ

ุชู ุฅุฌุฑุงุก ุชุญุณููุงุช ุดุงููุฉ ุนูู ูุธุงู ุชุณุฌูู ุงูุฏุฎูู ูุถูุงู ุนููู ุจุดูู ุตุญูุญ ูุน ุงููุณุชุฎุฏู admin/1234:

### 1. ๐ง ุชุญุณููุงุช Flutter Frontend

#### A. ุฅุนุฏุงุฏุงุช API (`mobile/lib/utils/env.dart`)
```dart
class Env {
  // URL ุงูุงูุชุฑุงุถู ููุฅูุชุงุฌ
  static String baseApiUrl = 'https://hotelmarina.com/MARINA_HOTEL_PORTABLE/api/v1';
  
  // ุฅุนุฏุงุฏุงุช ุจุฏููุฉ ููุชุทููุฑ
  static String get localApiUrl => 'http://localhost/MARINA_HOTEL_PORTABLE/api/v1';
  static String get testApiUrl => 'http://192.168.1.100/MARINA_HOTEL_PORTABLE/api/v1';
  
  // ุฅุนุฏุงุฏุงุช ุงููููุฉ ุงูุฒูููุฉ
  static const Duration connectTimeout = Duration(seconds: 15);
  static const Duration receiveTimeout = Duration(seconds: 20);
}
```

#### B. ุชุญุณูู ุฎุฏูุฉ API (`mobile/lib/services/api_service.dart`)
- โ ุฅุถุงูุฉ method ุฌุฏูุฏ `loginWithDetails()` ูุฅุฑุฌุงุน ุชูุงุตูู ุฃูุซุฑ
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุงุณุชุซูุงุกุงุช
- โ ุฏุนู ุฃูุถู ููุชูุซูู ุจู JWT

#### C. ุชุญุณูู ูููุฑ ุงูุชูุซูู (`mobile/lib/providers/auth_provider.dart`)
- โ ุฅุถุงูุฉ ุญุงูุฉ loading ููุนูููุงุช
- โ ุฑุณุงุฆู ุฎุทุฃ ููุตูุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- โ ูุนุงูุฌุฉ ุฃูุถู ูุฃุฎุทุงุก ุงูุดุจูุฉ
- โ ุฏุนู ูุธููุฉ `checkAuthStatus()`
- โ ุฅููุงููุฉ ูุณุญ ุฑุณุงุฆู ุงูุฎุทุฃ

#### D. ุชุญุณูู ูุงุฌูุฉ ุชุณุฌูู ุงูุฏุฎูู (`mobile/lib/screens/login_screen.dart`)
- โ ุฒุฑ ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ
- โ ุฑุณุงุฆู ุฎุทุฃ ููุณูุฉ ูููุตูุฉ
- โ ุฒุฑ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ูุน ุงูุฎุงุฏู
- โ loading indicators ุฃุซูุงุก ุงูุนูููุงุช
- โ validation ูุญุณู ููุญููู
- โ ุฏุนู Enter ูุชุณุฌูู ุงูุฏุฎูู

### 2. ๐ก๏ธ ุชุญุณููุงุช Backend API

#### A. ุชุญุณูู ุฅุนุฏุงุฏุงุช CORS (`MARINA_HOTEL_PORTABLE/api/v1/cors.php`)
- โ ุฏุนู ุงููุฒูุฏ ูู ุงููุตุงุฏุฑ ุงููุณููุญุฉ (localhost, 127.0.0.1)
- โ ุชุณุฌูู ุทูุจุงุช CORS ููุชุดุฎูุต
- โ ูุนุงูุฌุฉ ุฃูุถู ูู preflight requests
- โ ุฏุนู Capacitor ู Ionic ููุชุทุจููุงุช ุงููุญูููุฉ

#### B. ุชุญุณูู ุฅุนุฏุงุฏุงุช Bootstrap (`MARINA_HOTEL_PORTABLE/api/v1/bootstrap.php`)
- โ JWT secret ุฃูุซุฑ ุฃูุงูุงู
- โ ุฏุนู ูุตุงุฏุฑ CORS ูุชุนุฏุฏุฉ
- โ timeout settings ูุญุณูุฉ

#### C. API endpoints ููุฌูุฏุฉ ูุชุนูู ุจุดูู ุตุญูุญ:
- โ `/auth/login.php` - ุชุณุฌูู ุงูุฏุฎูู
- โ `/auth/ping.php` - ูุญุต Token
- โ `/auth/refresh.php` - ุชุฌุฏูุฏ Token

### 3. ๐๏ธ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ูุนูููุงุช ุงููุณุชุฎุฏู Admin:
- **Username:** `admin`
- **Password:** `1234` (plaintext)
- **Password Hash:** `$2y$10$/G4bK2Ixb9O.RXuF3636ueKzP5TmoGTznY9WVXpgxSenJC10DEP2a`
- **User Type:** `admin`
- **Status:** `Active (1)`
- **User ID:** `1`

ูุฏุนู ุงููุธุงู ููุงู ูู:
- ูููุงุช ุงููุฑูุฑ ุงููุดูุฑุฉ (`password_hash`)
- ูููุงุช ุงููุฑูุฑ ุงููุตูุฉ (`password`) ููุชูุงูู ุงููุฏูู

### 4. ๐งช ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ

#### A. ุตูุญุฉ ุงุฎุชุจุงุฑ HTML (`test_api_login.html`)
ุตูุญุฉ ุดุงููุฉ ูุงุฎุชุจุงุฑ:
- ุงุชุตุงู API
- ุชุณุฌูู ุงูุฏุฎูู
- Token validation
- ุนุฑุถ ุฑุณุงุฆู ููุตูุฉ

#### B. ุงุฎุชุจุงุฑ PHP Backend (`MARINA_HOTEL_PORTABLE/test_admin_login.php`)
- ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุชุญูู ูู ุจูุงูุงุช ุงููุณุชุฎุฏู
- ุงุฎุชุจุงุฑ ูููุงุช ุงููุฑูุฑ
- ูุญุต ุงูุตูุงุญูุงุช
- ุงุฎุชุจุงุฑ API endpoints

## ๐ ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงุฎุชุจุงุฑ ุงููุธุงู

#### ุงุฎุชุจุงุฑ ุงูู Backend:
```bash
# ูู ุจุฒูุงุฑุฉ:
http://hotelmarina.com/MARINA_HOTEL_PORTABLE/test_admin_login.php
```

#### ุงุฎุชุจุงุฑ ุงูู Frontend:
```bash
# ุงูุชุญ ุงูููู:
test_api_login.html
```

### 2. ุชุณุฌูู ุงูุฏุฎูู ูู Flutter App

```dart
// ุงูุจูุงูุงุช ุงููุทููุจุฉ:
Username: admin
Password: 1234
```

### 3. ุงุฎุชุจุงุฑ curl ููู API:

```bash
curl -X POST 'http://hotelmarina.com/MARINA_HOTEL_PORTABLE/api/v1/auth/login.php' \
  -H 'Content-Type: application/json' \
  -d '{
    "username": "admin",
    "password": "1234"
  }'
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### 1. ูุดุงูู CORS
- โ ุชู ุฅุถุงูุฉ ุฏุนู localhost ู 127.0.0.1
- โ ุชู ุฅุถุงูุฉ ุฏุนู Capacitor
- โ ุชุณุฌูู ุชูุตููู ููู CORS requests

### 2. ูุดุงูู ุงูุงุชุตุงู
- โ timeout ูุญุณู (15s ููุงุชุตุงูุ 20s ููุงุณุชูุจุงู)
- โ retry mechanism ูู ApiService
- โ ุฑุณุงุฆู ุฎุทุฃ ููุตูุฉ

### 3. ูุดุงูู ุงูุชูุซูู
- โ ุฏุนู password_hash ู plaintext
- โ JWT secret ูุญุณู
- โ token refresh ุขูู

## ๐ฑ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### ูุงุฌูุฉ ุชุณุฌูู ุงูุฏุฎูู:
- ๐๏ธ ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ
- ๐ Loading indicators
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุจูุฉ ููุฅุบูุงู
- ๐ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
- โ Validation ูุญุณู

### ูุธุงู ุงูุชูุซูู:
- ๐ JWT tokens ุขููุฉ
- ๐ ุญุงูุฉ loading
- ๐ Token refresh ุชููุงุฆู
- ๐ฑ ุฏุนู offline mode

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:
- ๐ ุฃุฎุทุงุก ุงูุดุจูุฉ
- โฐ Timeout errors
- ๐ ุฃุฎุทุงุก ุงูุชูุซูู
- ๐ ุฑุณุงุฆู ุจุงููุบุฉ ุงูุนุฑุจูุฉ

## ๐ง ุฅุนุฏุงุฏุงุช ุงูุชุทููุฑ

### ููุชุทููุฑ ุงููุญูู:
```dart
// ูู env.dartุ ูููู ุงุณุชุฎุฏุงู:
static String baseApiUrl = Env.localApiUrl; // ููุชุทููุฑ ุงููุญูู
```

### ููุงุฎุชุจุงุฑ:
```dart
// ููุงุฎุชุจุงุฑ ุนูู ุดุจูุฉ ูุญููุฉ:
static String baseApiUrl = Env.testApiUrl;
```

## ๐ ูุงุฆูุฉ ุงูุชุญูู

- โ ุงููุณุชุฎุฏู admin ููุฌูุฏ ููุนุงู
- โ ูููุฉ ุงููุฑูุฑ 1234 ุชุนูู
- โ API endpoints ุชุนูู
- โ CORS settings ุตุญูุญุฉ
- โ JWT tokens ุชูููุฏ ุจุดูู ุตุญูุญ
- โ Flutter app ูุชุตู ุจู API
- โ ุฑุณุงุฆู ุงูุฎุทุฃ ูุงุถุญุฉ
- โ ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุญุณูุฉ
- โ ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ ูุชููุฑุฉ

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงููุธุงู ุงูุขู ุฌุงูุฒ ุชูุงูุงู ูุงุณุชุฎุฏุงู ุงููุณุชุฎุฏู admin ุจูููุฉ ุงููุฑูุฑ 1234:

1. **Backend API** ูุนูู ุจุดูู ุตุญูุญ
2. **Flutter Frontend** ูุญุณู ููุฏุนู ุฌููุน ุงูููุฒุงุช ุงููุทููุจุฉ
3. **ูุงุนุฏุฉ ุงูุจูุงูุงุช** ุชุญุชูู ุนูู ุงููุณุชุฎุฏู ุจุงูุจูุงูุงุช ุงูุตุญูุญุฉ
4. **CORS** ููุนุฏ ููุณูุงุญ ุจุงูุงุชุตุงูุงุช ูู ูุตุงุฏุฑ ูุชุนุฏุฏุฉ
5. **ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ** ูุชููุฑุฉ ููุชุญูู ูู ูู ุดูุก

ุงููุณุชุฎุฏู ููููู ุงูุขู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ ุจุงุณุชุฎุฏุงู admin/1234 ูุงูุงูุชูุงู ุฅูู ููุญุฉ ุงูุชุญูู.