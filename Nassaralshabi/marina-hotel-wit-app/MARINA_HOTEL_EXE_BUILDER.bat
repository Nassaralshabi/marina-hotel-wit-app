@echo off
chcp 65001
title Marina Hotel - EXE Builder
color 0A

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                  ๐จ Marina Hotel Management System             โ
echo โ                        ููุดุฆ ุงููุธุงู ุงูุชูููุฐู                      โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo โก ูุฐุง ุงูุฅุนุฏุงุฏ ุณูููู ุจุฅูุดุงุก ูุธุงู ุชูููุฐู ุณุฑูุน (EXE) ููููุฏู
echo.
echo ๐ ูุง ุณูุชู ุฅูุดุงุคู:
echo    โข ูุธุงู ุชูููุฐู ูุณุชูู (ูุง ูุญุชุงุฌ XAMPP)
echo    โข ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ ุณุฑูุนุฉ
echo    โข ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ
echo    โข ูุธุงู ุฅุฏุงุฑุฉ ูุงูู
echo.
echo ๐ ูู ุชุฑูุฏ ุงููุชุงุจุนุฉุ
pause

cls
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                        ๐ง ุจุฏุก ุงูุฅุนุฏุงุฏ                          โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

:: ุฅูุดุงุก ูุฌูุฏ ุงูุจูุงุก
echo ๐ ุฅูุดุงุก ูุฌูุฏ ุงูุจูุงุก...
if not exist "MARINA_HOTEL_EXE" mkdir "MARINA_HOTEL_EXE"
cd "MARINA_HOTEL_EXE"

:: ุชุญููู PHP Desktop
echo.
echo ๐ฅ ุชุญููู PHP Desktop... (ูุฏ ูุณุชุบุฑู ุฏูุงุฆู)
if not exist "php-desktop.zip" (
    echo    ุฌุงุฑู ุงูุชุญููู...
    powershell -Command "& {$ProgressPreference='SilentlyContinue'; [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12; Invoke-WebRequest -Uri 'https://github.com/cztomczak/phpdesktop/releases/download/chrome-v57.0-rc/phpdesktop-chrome-57.0-rc-msvc2015.zip' -OutFile 'php-desktop.zip'}"
    if exist "php-desktop.zip" (
        echo    โ ุชู ุชุญููู PHP Desktop ุจูุฌุงุญ
    ) else (
        echo    โ ูุดู ูู ุงูุชุญูููุ ูุฑุฌู ุงูุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
        pause
        exit /b 1
    )
)

:: ุงุณุชุฎุฑุงุฌ ุงููููุงุช
echo.
echo ๐ ุงุณุชุฎุฑุงุฌ ุงููููุงุช...
if not exist "phpdesktop-chrome" (
    powershell -Command "Expand-Archive -Path 'php-desktop.zip' -DestinationPath '.' -Force"
    echo    โ ุชู ุงุณุชุฎุฑุงุฌ ุงููููุงุช
)

:: ุชุญุถูุฑ ูุฌูุฏ ุงูุชุทุจูู
echo.
echo ๐ ุชุญุถูุฑ ูููุงุช ุงูุชุทุจูู...
if not exist "phpdesktop-chrome\www" mkdir "phpdesktop-chrome\www"

:: ูุณุฎ ุงููููุงุช ุงูุฃุณุงุณูุฉ
echo    โข ูุณุฎ ุงููููุงุช ุงูุฃุณุงุณูุฉ...
for %%f in (*.php) do (
    if exist "..\%%f" copy "..\%%f" "phpdesktop-chrome\www\" >nul 2>&1
)

:: ูุณุฎ ุงููุฌูุฏุงุช ุงููุทููุจุฉ
echo    โข ูุณุฎ ูุฌูุฏ ุงูุฅุฏุงุฑุฉ...
if exist "..\admin" xcopy "..\admin" "phpdesktop-chrome\www\admin\" /S /E /I /Y /Q >nul 2>&1

echo    โข ูุณุฎ ูุฌูุฏ ุงูุฃุตูู...
if exist "..\assets" xcopy "..\assets" "phpdesktop-chrome\www\assets\" /S /E /I /Y /Q >nul 2>&1

echo    โข ูุณุฎ ูุฌูุฏ ุงูุชุถูููุงุช...
if exist "..\includes" xcopy "..\includes" "phpdesktop-chrome\www\includes\" /S /E /I /Y /Q >nul 2>&1

echo    โข ูุณุฎ ูุฌูุฏ API...
if exist "..\api" xcopy "..\api" "phpdesktop-chrome\www\api\" /S /E /I /Y /Q >nul 2>&1

echo    โข ุฅูุดุงุก ูุฌูุฏ ุงูุฑูุน...
if not exist "phpdesktop-chrome\www\uploads" mkdir "phpdesktop-chrome\www\uploads"
if not exist "phpdesktop-chrome\www\uploads\reports" mkdir "phpdesktop-chrome\www\uploads\reports"

:: ูุณุฎ ูุงุนุฏุฉ ุงูุจูุงูุงุช
if exist "..\hotel_db.sql" (
    copy "..\hotel_db.sql" "phpdesktop-chrome\www\" >nul 2>&1
    echo    โข ุชู ูุณุฎ ูุงุนุฏุฉ ุงูุจูุงูุงุช
)

:: ูุณุฎ ููู ุงูุฅุนุฏุงุฏ
if exist "..\setup_exe_database.php" (
    copy "..\setup_exe_database.php" "phpdesktop-chrome\www\" >nul 2>&1
    echo    โข ุชู ูุณุฎ ููู ุงูุฅุนุฏุงุฏ
)

echo    โ ุชู ูุณุฎ ุฌููุน ุงููููุงุช

:: ุฅูุดุงุก ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
echo.
echo โ๏ธ ุฅุนุฏุงุฏ ุงูุชุทุจูู...
(
echo {
echo     "application": {
echo         "title": "Marina Hotel Management System",
echo         "width": 1400,
echo         "height": 900,
echo         "min_width": 1000,
echo         "min_height": 700,
echo         "start_url": "setup_exe_database.php",
echo         "chrome_command_line_switches": {
echo             "disable-web-security": true,
echo             "allow-running-insecure-content": true,
echo             "disable-features": "VizDisplayCompositor",
echo             "disable-extensions": true
echo         }
echo     },
echo     "debugging": {
echo         "show_console": false,
echo         "subprocess_show_console": false
echo     },
echo     "web_server": {
echo         "listen_on": ["127.0.0.1", 8080],
echo         "directory_index": ["setup_exe_database.php", "login.php"],
echo         "hidden_files": [".htaccess", "*.bat", "*.md"]
echo     }
echo }
) > "phpdesktop-chrome\settings.json"

:: ุฅูุดุงุก ููู ุชุดุบูู ุณุฑูุน
echo.
echo ๐ ุฅูุดุงุก ููู ุงูุชุดุบูู...
(
echo @echo off
echo chcp 65001
echo title Marina Hotel Management System
echo color 0B
echo cls
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                  ๐จ Marina Hotel Management System             โ
echo โ                        ูุธุงู ุฅุฏุงุฑุฉ ุงูููุฏู                        โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ ุงููุธุงู ูุนูู ุนูู: http://localhost:8080
echo ๐ป ุชุฃูุฏ ูู ุนุฏู ุงุณุชุฎุฏุงู ูููุฐ 8080 ูู ุจุฑูุงูุฌ ุขุฎุฑ
echo.
echo ๐ ุจุฏุก ุชุดุบูู ุงููุธุงู...
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ  ูุฅุบูุงู ุงููุธุงู: ุฃุบูู ูุฐู ุงููุงูุฐุฉ ุฃู ุงุถุบุท Ctrl+C                โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo start phpdesktop-chrome.exe
echo pause
) > "Marina_Hotel_System.bat"

:: ุฅูุดุงุก ููู README
echo.
echo ๐ ุฅูุดุงุก ุฏููู ุงูุงุณุชุฎุฏุงู...
(
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                Marina Hotel Management System                  โ
echo โ                      ุฏููู ุงูุงุณุชุฎุฏุงู ุงูุณุฑูุน                      โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ฏ ูุธุงู ุฅุฏุงุฑุฉ ููุฏู ูุชูุงูู ูุณุฑูุน
echo.
echo ๐ ูุชุทูุจุงุช ุงูุชุดุบูู:
echo    โข Windows 7 ุฃู ุฃุญุฏุซ
echo    โข ูุง ูุชุทูุจ ุชุซุจูุช ุจุฑุงูุฌ ุฅุถุงููุฉ
echo    โข ูุง ูุญุชุงุฌ ุงุชุตุงู ุฅูุชุฑูุช ููุนูู
echo.
echo ๐ ุทุฑููุฉ ุงูุชุดุบูู:
echo    1. ุดุบู ููู: Marina_Hotel_System.bat
echo    2. ุฃู ุดุบู ูุจุงุดุฑุฉ: phpdesktop-chrome.exe
echo    3. ุงููุธุงู ุณููุชุญ ุชููุงุฆูุงู
echo.
echo ๐ง ุงูุฅุนุฏุงุฏ ุงูุฃูู:
echo    โข ุณูุชู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู
echo    โข ุงุณู ุงููุณุชุฎุฏู: admin
echo    โข ูููุฉ ุงููุฑูุฑ: admin123
echo    โข ุบูุฑ ูููุฉ ุงููุฑูุฑ ููุฑุงู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู
echo.
echo ๐ ุฑูุงุจุท ูููุฉ:
echo    โข ุงููุธุงู: http://localhost:8080
echo    โข ุชุณุฌูู ุงูุฏุฎูู: http://localhost:8080/login.php
echo    โข ููุญุฉ ุงูุชุญูู: http://localhost:8080/admin/dash.php
echo.
echo ๐ ูููุงุช ุงููุธุงู:
echo    โข ูุงุนุฏุฉ ุงูุจูุงูุงุช: data/marina_hotel.db
echo    โข ุงููููุงุช ุงููุฑููุนุฉ: uploads/
echo    โข ุงูุชูุงุฑูุฑ: uploads/reports/
echo.
echo ๐ ูู ุญุงูุฉ ุงููุดุงูู:
echo    โข ุชุฃูุฏ ูู ุนุฏู ุงุณุชุฎุฏุงู ุงููููุฐ 8080
echo    โข ุดุบู ููุณุคูู ุฅุฐุง ูุฒู ุงูุฃูุฑ
echo    โข ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุจุฑุงูุฌ ุญูุงูุฉ ุชุญุฌุจ ุงููุธุงู
echo.
echo ๐ ุงููููุฒุงุช:
echo    โ ุฅุฏุงุฑุฉ ุงูุญุฌูุฒุงุช
echo    โ ุฅุฏุงุฑุฉ ุงูุบุฑู
echo    โ ุฅุฏุงุฑุฉ ุงูููุธููู
echo    โ ุงูุชูุงุฑูุฑ ุงููุงููุฉ
echo    โ ุฅุฏุงุฑุฉ ุงููุตุฑููุงุช
echo    โ ูุธุงู ุงููุฏููุนุงุช
echo    โ ุงูุชูุงุฑูุฑ ุงูุดุงููุฉ
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                   ๐ ูุจุฑูู! ุงููุธุงู ุฌุงูุฒ                       โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
) > "README.txt"

:: ุฅูุดุงุก ููู ุฅุนุฏุงุฏ ุณุฑูุน
echo.
echo ๐๏ธ ุฅูุดุงุก ููู ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน...
(
echo @echo off
echo chcp 65001
echo title Marina Hotel - ุฅุนุฏุงุฏ ุณุฑูุน
echo color 0E
echo cls
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                     ๐ง ุฅุนุฏุงุฏ ุณุฑูุน ูููุธุงู                       โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ ุณูุชู ุฅุนุฏุงุฏ ุงููุธุงู ุชููุงุฆูุงู...
echo.
echo ๐ ุจุฏุก ุงูุชุดุบูู...
echo start phpdesktop-chrome.exe
echo.
echo โณ ุงูุชุธุงุฑ ุชุดุบูู ุงููุธุงู...
echo timeout /t 5 /nobreak ^>nul
echo.
echo ๐ ูุชุญ ุงููุธุงู ูู ุงููุชุตูุญ...
echo start http://localhost:8080/setup_exe_database.php
echo.
echo โ ุชู! ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู
echo.
echo pause
) > "ุฅุนุฏุงุฏ_ุณุฑูุน.bat"

:: ุชุฎุตูุต ุงูุฃููููุฉ
if exist "..\assets\icons\icon.ico" (
    copy "..\assets\icons\icon.ico" "phpdesktop-chrome\phpdesktop-chrome.exe.ico" >nul 2>&1
    echo    โ ุชู ุชุฎุตูุต ุงูุฃููููุฉ
)

:: ุงููุชูุฌุฉ ุงูููุงุฆูุฉ
cls
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                    ๐ ุชู ุฅูุดุงุก ุงููุธุงู ุจูุฌุงุญ!                  โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ ูุฌูุฏ ุงููุธุงู: MARINA_HOTEL_EXE
echo.
echo ๐ ูููุงุช ุงูุชุดุบูู:
echo    โข Marina_Hotel_System.bat      (ุงูููู ุงูุฑุฆูุณู)
echo    โข ุฅุนุฏุงุฏ_ุณุฑูุน.bat              (ููุฅุนุฏุงุฏ ุงูุณุฑูุน)
echo    โข phpdesktop-chrome.exe        (ุงูุชุดุบูู ุงููุจุงุดุฑ)
echo.
echo ๐ ูููุงุช ุฅุถุงููุฉ:
echo    โข README.txt                   (ุฏููู ุงูุงุณุชุฎุฏุงู)
echo.
echo ๐ ูุนูููุงุช ุงูุฏุฎูู:
echo    โข ุงุณู ุงููุณุชุฎุฏู: admin
echo    โข ูููุฉ ุงููุฑูุฑ: admin123
echo.
echo ๐ ุงูุฑุงุจุท: http://localhost:8080
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ              ๐ฏ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููุฑุงู!                  โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo ๐ ูู ุชุฑูุฏ ุชุดุบูู ุงููุธุงู ุงูุขูุ
echo.
set /p choice="ุงูุชุจ Y ููุชุดุบูู ุฃู N ููุฎุฑูุฌ: "
if /i "%choice%"=="Y" (
    echo.
    echo ๐ ุจุฏุก ุงูุชุดุบูู...
    cd "phpdesktop-chrome"
    start phpdesktop-chrome.exe
    echo.
    echo โ ุชู ุชุดุบูู ุงููุธุงู!
    echo ๐ ุณููุชุญ ุชููุงุฆูุงู ุนูู: http://localhost:8080
    echo.
    pause
) else (
    echo.
    echo ๐ก ููููู ุชุดุบูู ุงููุธุงู ูุงุญูุงู ูู ูุฌูุฏ: MARINA_HOTEL_EXE
    echo.
    pause
)

cd ..
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                        ๐ ุชู ุจูุฌุงุญ!                          โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.