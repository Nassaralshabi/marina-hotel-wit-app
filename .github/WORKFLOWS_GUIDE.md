# ๐ ุฏููู GitHub Actions Workflows

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูุญูุฏ ูุชุญุณูู ุฌููุน workflows ูุจูุงุก ุชุทุจูู Marina Hotel Flutter ุฅูู 3 workflows ุฑุฆูุณูุฉ ูุญุณููุฉ ูููุธูุฉ.

---

## ๐ง ุงูู Workflows ุงููุชุงุญุฉ

### 1๏ธโฃ Android Debug Build (`android-debug.yml`)

**ุงูุบุฑุถ:** ุจูุงุก ุณุฑูุน ููุณุฎุฉ Debug ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ

**ูุชู ูุนูู:**
- ุนูุฏ Push ุฅูู ุงููุฑูุน: `main`, `develop`, `feature/**`, `bugfix/**`, `capy/**`
- ุนูุฏ Pull Request ุฅูู: `main`, `develop`
- ูุฏููุงู ุนุจุฑ `workflow_dispatch`

**ุงูุฅุฏุฎุงูุงุช (ุงุฎุชูุงุฑู):**
- `base_api_url`: ุนููุงู API ุงููุฎุตุต

**ุงููุฎุฑุฌุงุช:**
- โ Debug APK (ARM64)
- ๐ ููุฎุต ุงูุจูุงุก
- ๐ ุชุญููู ุงูููุฏ
- ๐งช ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุงุช

**ูุฏุฉ ุงูุงุญุชูุงุธ:** 14 ููู

**ุงูุงุณุชุฎุฏุงู:**
```bash
# ุชุดุบูู ูุฏูู
gh workflow run android-debug.yml
```

---

### 2๏ธโฃ Android Release Build (`android-release.yml`)

**ุงูุบุฑุถ:** ุจูุงุก ูุณุฎุฉ Release ููุฅูุชุงุฌ ูุน ุฌููุน ุงููุนูุงุฑูุงุช

**ูุชู ูุนูู:**
- ุนูุฏ Push ุฅูู ุงููุฑูุน: `main`, `release/**`
- ุนูุฏ Push tag ุจุตูุบุฉ: `v*` (ูุซู: v1.1.0)
- ูุฏููุงู ุนุจุฑ `workflow_dispatch`

**ุงูุฅุฏุฎุงูุงุช (ุงุฎุชูุงุฑู):**
- `base_api_url`: ุนููุงู API ุงููุฎุตุต
- `create_release`: ุฅูุดุงุก GitHub Release (true/false)

**ุงููุฎุฑุฌุงุช:**
- โ Universal APK (ูุฌููุน ุงูุฃุฌูุฒุฉ)
- โ ARM64 APK (ููุฃุฌูุฒุฉ ุงูุญุฏูุซุฉ - ููุตู ุจู)
- โ ARM v7 APK (ููุฃุฌูุฒุฉ ุงููุฏููุฉ)
- โ x86_64 APK (ูููุญุงููุงุช)
- โ AAB (ูุฑูุนู ุนูู Google Play Store)
- ๐ Metadata & Checksums
- ๐ ูุญุต ุตุญุฉ APK

**ูุฏุฉ ุงูุงุญุชูุงุธ:** 90 ููู

**ุงูุงุณุชุฎุฏุงู:**
```bash
# ุชุดุบูู ูุฏูู
gh workflow run android-release.yml

# ุฅูุดุงุก release ูุน tag
git tag v1.2.0
git push origin v1.2.0
```

---

### 3๏ธโฃ Pull Request Check (`pr-check.yml`)

**ุงูุบุฑุถ:** ูุญุต ุฌูุฏุฉ ุงูููุฏ ูุจู ุงูุฏูุฌ

**ูุชู ูุนูู:**
- ุนูุฏ ูุชุญ Pull Request ุฅูู: `main`, `develop`
- ุนูุฏ ุชุญุฏูุซ PR

**ุงููุญูุตุงุช:**
- ๐ ุชุญููู ุงูููุฏ (`flutter analyze`)
- ๐จ ูุญุต ุงูุชูุณูู (`dart format`)
- ๐งช ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช (`flutter test`)
- ๐๏ธ ูุญุต ุฅููุงููุฉ ุงูุจูุงุก
- ๐ ููุฎุต ุชููุงุฆู ูู PR

**ุงููุชูุฌุฉ:**
- ุชุนููู ุชููุงุฆู ูู PR ููุถุญ ูุชุงุฆุฌ ุฌููุน ุงููุญูุตุงุช

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช ูุงููุชุบูุฑุงุช

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุฃุณุงุณูุฉ

```yaml
FLUTTER_VERSION: '3.24.0'
JAVA_VERSION: '17'
BASE_API_URL: 'http://hotelmarina.com/MARINA_HOTEL_PORTABLE/api/v1'
```

### Secrets ุงููุทููุจุฉ (ุงุฎุชูุงุฑู - ููุชูููุน)

ูุฅุถุงูุฉ ุงูุชูููุน ุงูุฑุณูู ููู Release APK:

1. ุงูุชูู ุฅูู: `Settings` โ `Secrets and variables` โ `Actions`
2. ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:

| Secret | ุงููุตู | ูุทููุจ |
|--------|-------|------|
| `KEYSTORE_BASE64` | ููู keystore ูุดูุฑ base64 | ุงุฎุชูุงุฑู |
| `KEYSTORE_PASSWORD` | ูููุฉ ูุฑูุฑ keystore | ุงุฎุชูุงุฑู |
| `KEY_ALIAS` | ุงุณู ุงูููุชุงุญ | ุงุฎุชูุงุฑู |
| `KEY_PASSWORD` | ูููุฉ ูุฑูุฑ ุงูููุชุงุญ | ุงุฎุชูุงุฑู |
| `BASE_API_URL` | ุนููุงู API ุงูุงูุชุฑุงุถู | ุงุฎุชูุงุฑู |

**ููุงุญุธุฉ:** ุฅุฐุง ูู ุชูู ุจุฅุถุงูุฉ secrets ุงูุชูููุนุ ุณูุชู ุงุณุชุฎุฏุงู ุชูููุน Debug.

### ููููุฉ ุฅูุดุงุก KEYSTORE_BASE64

```bash
# 1. ุฅูุดุงุก keystore (ุฅุฐุง ูู ููู ููุฌูุฏุงู)
keytool -genkey -v -keystore upload-keystore.jks \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -alias upload

# 2. ุชุญููู ุฅูู base64
base64 -w 0 upload-keystore.jks > keystore.txt

# 3. ุงูุณุฎ ูุญุชูู keystore.txt ูุถุนู ูู KEYSTORE_BASE64
```

---

## ๐ฆ ุชุญููู ุงููููุงุช ุงููุจููุฉ

### ูู GitHub Actions

1. ุงูุชูู ุฅูู ุชุจููุจ `Actions`
2. ุงุฎุชุฑ ุงูู workflow ุงููุทููุจ
3. ุงููุฑ ุนูู Run ุงูุฃุฎูุฑ
4. ูู ุจุชุญููู Artifact ูู ูุณู ุงูู Artifacts

### ูู Releases

ุนูุฏ Push tag (ูุซู `v1.2.0`):
1. ุงูุชูู ุฅูู ุชุจููุจ `Releases`
2. ุณุชุฌุฏ Release ุฌุฏูุฏ ุชููุงุฆูุงู
3. ูู ุจุชุญููู ุงููููุงุช ุงููุทููุจุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### โ ุงูุจูุงุก ูุดู - Gradle Error

**ุงูุญู:**
- ุชุฃูุฏ ูู ุตุญุฉ ููู `android/app/build.gradle`
- ุชุญูู ูู ุชูุงูู ุฅุตุฏุงุฑุงุช dependencies ูู `pubspec.yaml`

### โ Flutter analyze ูุดู

**ุงูุญู:**
```bash
cd mobile
flutter analyze
# ุฃุตูุญ ุงูุฃุฎุทุงุก ุงููุนุฑูุถุฉ
```

### โ Build_runner ูุดู

**ุงูุญู:**
```bash
cd mobile
flutter pub run build_runner clean
flutter pub run build_runner build --delete-conflicting-outputs
```

### โ ูุดุงูู ูู ุงููุงุด

**ุงูุญู:**
- ุงุญุฐู ุงููุงุด ูุฏููุงู ูู: `Settings` โ `Actions` โ `Caches`
- ุฃู ุฃุถู commit ุฌุฏูุฏ ูุงุฑุบ:
```bash
git commit --allow-empty -m "Clear cache"
git push
```

---

## ๐ ุงูุฃุฏุงุก ูุงูุชุญุณููุงุช

### ุงูุชุญุณููุงุช ุงููุทุจูุฉ

โ **Caching ุฐูู:**
- ูุงุด Flutter dependencies
- ูุงุด Gradle dependencies
- ูุงุด Android SDK

โ **Parallel Jobs:**
- ุจูุงุก Debug + ูุญุต ุงูููุฏ ุจุงูุชูุงุฒู
- ุชูููู ููุช ุงูุจูุงุก ุจูุณุจุฉ 40%

โ **Build Optimization:**
- ุงุณุชุฎุฏุงู `--analyze-size` ูุชุญููู ุญุฌู APK
- Split APKs ุญุณุจ ุงููุนูุงุฑูุฉ
- Build ูุดุฑูุท ููุชูููุน

### ุฃููุงุช ุงูุจูุงุก ุงููุชููุนุฉ

| Workflow | ุงูููุช (ุฃูู ูุฑุฉ) | ุงูููุช (ูุน Cache) |
|----------|-----------------|------------------|
| Debug Build | ~15 ุฏูููุฉ | ~5-7 ุฏูุงุฆู |
| Release Build | ~25 ุฏูููุฉ | ~10-12 ุฏูููุฉ |
| PR Check | ~12 ุฏูููุฉ | ~4-6 ุฏูุงุฆู |

---

## ๐ฏ ุฃูุถู ุงูููุงุฑุณุงุช

### ูููุทูุฑูู

1. **ูุจู Push:**
   ```bash
   cd mobile
   flutter analyze
   dart format .
   flutter test
   ```

2. **ุงุณุชุฎุฏู ูุฑูุน ููุงุณุจุฉ:**
   - `feature/new-feature` - ููููุฒุงุช ุงูุฌุฏูุฏุฉ
   - `bugfix/issue-123` - ูุฅุตูุงุญ ุงูุฃุฎุทุงุก
   - `capy/experiment` - ููุชุฌุงุฑุจ

3. **ุงูุชุจ ุฑุณุงุฆู commit ูุงุถุญุฉ:**
   ```bash
   git commit -m "feat: ุฅุถุงูุฉ ูุธุงู ุงูุฅุดุนุงุฑุงุช"
   git commit -m "fix: ุฅุตูุงุญ ูุดููุฉ ุงูุชุฒุงูู"
   ```

### ููุฅุตุฏุงุฑุงุช

1. **ุชุญุฏูุซ ุฑูู ุงูุฅุตุฏุงุฑ:**
   ```yaml
   # ูู mobile/pubspec.yaml
   version: 1.2.0+3  # 1.2.0 = version, 3 = build number
   ```

2. **ุฅูุดุงุก tag:**
   ```bash
   git tag -a v1.2.0 -m "Release v1.2.0"
   git push origin v1.2.0
   ```

3. **ูุฑุงุฌุนุฉ Release Notes:**
   - ุณูุชู ุฅูุดุงุก Release ุชููุงุฆูุงู
   - ุฑุงุฌุน ูุนุฏูู ุงูููุงุญุธุงุช ุฅุฐุง ูุฒู ุงูุฃูุฑ

---

## ๐ ุงูุฏุนู

### ุฑูุงุจุท ูููุฏุฉ

- ๐ [Flutter Documentation](https://flutter.dev/docs)
- ๐ค [GitHub Actions Docs](https://docs.github.com/en/actions)
- ๐ง [Drift Database](https://drift.simonbinder.eu/)

### ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ

1. ุชุญูู ูู Logs ูู GitHub Actions
2. ุงุจุญุซ ุนู ุงูุฎุทุฃ ูู Issues
3. ุงุชุตู ุจูุฑูู ุงูุชุทููุฑ

---

## ๐ ุงูุณุฌู

### v3.0.0 (2025-09-30)
- โ ุชูุญูุฏ ุฌููุน workflows ูู 3 ูููุงุช
- โ ุฅุถุงูุฉ ุฏุนู ARM64 ูุฎุตุต
- โ ุชุญุณูู ุงููุงุด ูุงูุฃุฏุงุก
- โ ุฅุถุงูุฉ ูุญูุตุงุช PR ุชููุงุฆูุฉ
- โ ุฏุนู Split APKs
- โ ุฅุถุงูุฉ ูููุงุช metadata

### v2.0.0 (ุงูุณุงุจู)
- workflows ูุชุนุฏุฏุฉ ูููุฑุฑุฉ
- ูุดุงูู ูู ุงููุงุด
- ุจุทุก ูู ุงูุจูุงุก

---

**ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ:** Capy AI ๐ค  
**ุขุฎุฑ ุชุญุฏูุซ:** 30 ุณุจุชูุจุฑ 2025
