echo 'diff --git a/kotlin-marina/app/build.gradle b/kotlin-marina/app/build.gradle\n--- a/kotlin-marina/app/build.gradle\n+++ b/kotlin-marina/app/build.gradle\n@@\n android {\n-    compileSdk 34\n+    namespace "com.marinahotel.kotlin"\n+    compileSdk 34\n@@\n     defaultConfig {\n         applicationId "com.marinahotel.kotlin"\n         minSdk 24\n         targetSdk 34\n         versionCode 1\n         versionName "1.0"\n     }\ndiff --git a/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/MainActivity.kt b/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/MainActivity.kt\n--- a/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/MainActivity.kt\n+++ b/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/MainActivity.kt\n@@ -66,8 +66,8 @@\n     private fun showAppInfo() {\n         val info = StringBuilder()\n-        info.append("App ID: ").append(BuildConfig.APPLICATION_ID).append("\\n")\n-        info.append("Version: ").append(BuildConfig.VERSION_NAME)\n+        info.append("App ID: ").append(packageName).append("\\n")\n+        info.append("Version: ").append(packageManager.getPackageInfo(packageName, 0).versionName)\n         AlertDialog.Builder(this)\n             .setTitle("About App")\n             .setMessage(info.toString())\ndiff --git a/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/payments/BookingPaymentActivity.kt b/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/payments/BookingPaymentActivity.kt\n--- a/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/payments/BookingPaymentActivity.kt\n+++ b/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/payments/BookingPaymentActivity.kt\n@@ -87,7 +87,9 @@\n     private fun formatReference(value: String?) : String {\n-        return value.substring(0, 3) + "-" + value.substring(3)\n+        return if (!value.isNullOrEmpty() && value.length > 3) {\n+            value.substring(0, 3) + "-" + value.substring(3)\n+        } else ""\n     }\ndiff --git a/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/settings/users/SettingsUsersActivity.kt b/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/settings/users/SettingsUsersActivity.kt\n--- a/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/settings/users/SettingsUsersActivity.kt\n+++ b/kotlin-marina/app/src/main/java/com/marinahotel/kotlin/settings/users/SettingsUsersActivity.kt\n@@ -14,8 +14,10 @@\n import android.widget.Toast\n import com.marinahotel.kotlin.R\n import com.marinahotel.kotlin.databinding.ActivitySettingsUsersBinding\n+import com.google.android.material.appbar.MaterialToolbar\n \n class SettingsUsersActivity : AppCompatActivity() {\n     private lateinit var binding: ActivitySettingsUsersBinding\n \n     override fun onCreate(savedInstanceState: Bundle?) {\n         super.onCreate(savedInstanceState)\n         binding = ActivitySettingsUsersBinding.inflate(layoutInflater)\n         setContentView(binding.root)\n-\n-        toolbar.title = getString(R.string.settings_users_title)\n-        setSupportActionBar(toolbar)\n+        val toolbar = findViewById<MaterialToolbar>(R.id.toolbar)\n+        toolbar.title = getString(R.string.settings_users_title)\n+        setSupportActionBar(toolbar)\ndiff --git a/kotlin-marina/app/src/main/res/layout/activity_settings_users.xml b/kotlin-marina/app/src/main/res/layout/activity_settings_users.xml\n--- a/kotlin-marina/app/src/main/res/layout/activity_settings_users.xml\n+++ b/kotlin-marina/app/src/main/res/layout/activity_settings_users.xml\n@@ -1,4 +1,13 @@\n <LinearLayout\n     xmlns:android="http://schemas.android.com/apk/res/android"\n     xmlns:app="http://schemas.android.com/apk/res-auto"\n     xmlns:tools="http://schemas.android.com/tools"\n     android:layout_width="match_parent"\n     android:layout_height="match_parent"\n     tools:context=".settings.users.SettingsUsersActivity"\n     android:orientation="vertical">\n+\n+    <com.google.android.material.appbar.MaterialToolbar\n+        android:id="@+id/toolbar"\n+        android:layout_width="match_parent"\n+        android:layout_height="?attr/actionBarSize"\n+        android:background="?attr/colorPrimary"\n+        app:title="@string/settings_users_title"\n+        app:titleTextColor="@android:color/white" />' > fix-buildconfig-toolbar.patch && git apply fix-buildconfig-toolbar.patch && git add . && git commit -m "fix(kotlin): إصلاح BuildConfig وToolbar وNullable string" && git push
