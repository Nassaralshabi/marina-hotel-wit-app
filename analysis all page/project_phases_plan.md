# خطة تطوير مراحل توافق تطبيق Flutter مع لوحة PHP

## المرحلة 1: الحجوزات والمدفوعات ✅
- توسيع مخطط Drift للحجوزات ليشمل حقول الهوية، عدد الليالي المتوقع، وتاريخ المغادرة الفعلي.
- تحديث شاشة تعديل الحجز لتجميع بيانات الضيف، التواريخ، والملاحظات بنفس دقة لوحة PHP.
- تحسين قائمة الحجوزات بعرض الهوية، الليالي المتوقعة والفعلية، حالة المدفوعات، والتنبيهات النشطة.
- مواءمة شاشات الدفع والمغادرة لمعالجة طرق الدفع، توليد الإيصالات والفواتير، وتسجيل المغادرة بعد اكتمال المدفوعات.

## المرحلة 2: المصروفات والصندوق (قيد التنفيذ)
- مطابقة شاشة المصروفات في Flutter مع واجهات `admin/expenses` بما في ذلك أنواع المصروفات، ربط الموظفين والموردين، وسجل العمليات (`expense_logs`).
- إضافة إدارة سحوبات الرواتب بنفس نموذج `salary_withdrawals.php` مع حساب الرصيد المتبقي للراتب الشهري.
- تطوير شاشة الصندوق اليومي لتدعم فتح/إغلاق السجل، إضافة الحركات النقدية، وعرض الملخصات والرسوم البيانية كما في `cash_register.php` و`cash_reports.php`.
- تحديث مستودعات Drift وجداول `Expenses`, `SalaryWithdrawals`, `CashTransactions`، وتوفير عمليات الترحيل اللازمة.

## المرحلة 3: الملاحظات والتنبيهات
- تمثيل جدول `shift_notes` في قاعدة البيانات المحلية وإتاحة شاشة لإدارة ملاحظات المناوبات مع فلاتر النوبات، الإشعارات غير المقروءة، وأولوية التنبيه.
- ربط شاشة الملاحظات في الحجوزات بالملاحظات العامة لضمان رؤية موحدة للتنبيهات الحرجة.

## المرحلة 4: الإعدادات، الموظفون، والمستخدمون
- نقل وظائف إدارة الموظفين (إضافة/تعديل/حالة/رواتب) من لوحة الويب إلى تطبيق Flutter مع الحفاظ على الصلاحيات.
- دعم إدارة المستخدمين والصلاحيات (جداول `users`, `permissions`, `user_permissions`) في التطبيق الهاتفي حسب الحاجة التشغيلية.
- توفير شاشة صيانة النظام الأساسية (تنظيف الجلسات، نسخ احتياطي سريع، فحص التناسق) إذا كان من المطلوب تنفيذها على الجهاز.

## المرحلة 5: التقارير والرؤية الشاملة
- اختيار أهم التقارير التشغيلية (الإيرادات، الإشغال، المصروفات) وبناؤها باستخدام مكتبة رسومية (مثل `fl_chart`) مع خيارات تصدير.
- ضمان توافق البيانات عبر جميع الشاشات والتقارير، بما في ذلك الاعتمادات على الحقول الجديدة (مثل الليالي الفعلية، حالة الصندوق، سجلات المصروفات).

> يتم تحديث هذه الخطة مع تقدم التنفيذ لضمان توثيق جميع الخطوات وإبقاء الفريق على اطلاع بآخر المستجدات.